(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,r){},16:function(e,t,r){},17:function(e,t,r){},18:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(1),i=r.n(n),s=r(9),o=r.n(s),c=(r(15),r(2)),d=r(3),l=r(6),u=r(5);r(16);var p=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("div",{className:"header__logo"})})};function h(e){return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("img",{className:"card__image",src:e.card.link,alt:e.card.name,onClick:e.onClick}),Object(a.jsx)("p",{className:"card__caption",children:e.card.name}),Object(a.jsxs)("div",{className:"card__like-control",children:[Object(a.jsx)("button",{className:"card__btn-like hover-breathing hover-breathing_deep ".concat(e.card.isLikedByMe&&"card__btn-like_liked"),type:"button"}),Object(a.jsx)("p",{className:"card__like-counter",children:e.card.likeCount})]}),Object(a.jsx)("button",{className:"card__btn-remove hover-breathing hover-breathing_deep ".concat(!e.card.isOwnedByMe&&"card__btn-remove_hidden"),type:"button"})]})}var _=r(7),m=r(4),b={baseUrl:"https://mesto.nomoreparties.co/v1/cohort-16",headers:{"Content-Type":"application/json",authorization:"21fa6b5f-35b5-4dfd-b2f6-88404e0e94c4"}},j=new(function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){return Object(c.a)(this,r),t.call(this,e)}return Object(d.a)(r,[{key:"getMe",value:function(){var e=this;return Object(_.a)(Object(m.a)(r.prototype),"getMe",this).call(this).then((function(t){return e._storeMyId(t),t}))}},{key:"getInitialCards",value:function(){var e=this;return(this._myId?Promise.resolve():this.getMe()).then((function(){return Object(_.a)(Object(m.a)(r.prototype),"getInitialCards",e).call(e)})).then((function(t){return t.map((function(t){return e._extendCard(t)}))}))}},{key:"likeCard",value:function(e){var t=this;return Object(_.a)(Object(m.a)(r.prototype),"likeCard",this).call(this,e).then((function(e){return t._extendCard(e)}))}},{key:"dislikeCard",value:function(e){var t=this;return Object(_.a)(Object(m.a)(r.prototype),"dislikeCard",this).call(this,e).then((function(e){return t._extendCard(e)}))}},{key:"sendCard",value:function(e){var t=this;return Object(_.a)(Object(m.a)(r.prototype),"sendCard",this).call(this,e).then((function(e){return t._extendCard(e)}))}},{key:"_extendCard",value:function(e){var t=this;return e.isOwnedByMe=this._isMyId(e.owner._id),e.likeCount=e.likes.length||0,e.isLikedByMe=e.likes.some((function(e){return t._isMyId(e._id)})),e}},{key:"_isMyId",value:function(e){return this._myId===e}},{key:"_storeMyId",value:function(e){this._myId=e._id}}]),r}(function(){function e(t){var r=t.baseUrl,a=t.headers;Object(c.a)(this,e),this._baseUrl=r,this._headers=a}return Object(d.a)(e,[{key:"_fetch",value:function(e){var t=e.method,r=void 0===t?"GET":t,a=e.urlPart,n=e.payload,i=this._baseUrl+a,s=Object.assign({},{headers:this._headers},{method:r},n?{body:JSON.stringify(n)}:void 0);return fetch(i,s).then((function(e){return e.ok?e.json():Promise.reject("Server respond with ".concat(e.status))})).catch((function(e){return console.error("Something went wrong",e),Promise.reject(e)}))}},{key:"getInitialCards",value:function(){return this._fetch({urlPart:"/cards"})}},{key:"sendCard",value:function(e){var t=e.name,r=e.link;return this._fetch({method:"POST",urlPart:"/cards",payload:{name:t,link:r}})}},{key:"deleteCard",value:function(e){return this._fetch({method:"DELETE",urlPart:"/cards/".concat(e)})}},{key:"likeCard",value:function(e){return this._fetch({method:"PUT",urlPart:"/cards/likes/".concat(e)})}},{key:"dislikeCard",value:function(e){return this._fetch({method:"DELETE",urlPart:"/cards/likes/".concat(e)})}},{key:"getMe",value:function(){return this._fetch({urlPart:"/users/me"})}},{key:"updateMe",value:function(e){var t=e.name,r=e.about;return this._fetch({method:"PATCH",urlPart:"/users/me",payload:{name:t,about:r}})}},{key:"setAvatar",value:function(e){return this._fetch({method:"PATCH",urlPart:"/users/me/avatar",payload:{avatar:e}})}}]),e}()))(b),O=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).updateMe=function(e){var t=e.name,r=e.about,n=e.avatar;a.setState({userName:t,userDescription:r,userAvatar:n})},a.updateCards=function(e){a.setState({cards:e})},a.state={userName:"",userDescription:"",userAvatar:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",cards:[]},a}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this;j.getMe().then((function(t){return e.updateMe(t)})).then((function(){return j.getInitialCards()})).then((function(t){return e.updateCards(t)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("main",{className:"main page__margin-wrapper",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__avatar-box",children:[Object(a.jsx)("img",{className:"profile__avatar",alt:"".concat(this.state.userName,", ").concat(this.state.userDescription),src:this.state.userAvatar}),Object(a.jsx)("button",{className:"profile__btn-set-avatar",type:"button",onClick:this.props.onEditAvatar})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__display-name-wrapper",children:[Object(a.jsx)("h1",{className:"profile__display-name",children:this.state.userName}),Object(a.jsx)("button",{className:"profile__btn-edit hover-breathing hover-breathing_deep",type:"button",onClick:this.props.onEditProfile})]}),Object(a.jsx)("p",{className:"profile__job",children:this.state.userDescription})]}),Object(a.jsx)("button",{className:"profile__btn-add hover-breathing hover-breathing_deep",type:"button",onClick:this.props.onAddPlace})]}),Object(a.jsx)("ul",{className:"cards",children:this.state.cards.map((function(t){return Object(a.jsx)(h,{card:t,onClick:function(){return e.props.onCardClick(t)}},t._id)}))})]})}}]),r}(i.a.Component),f=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(c.a)(this,r),a=t.call(this,e),e.name&&e.title&&e.onClose||console.error("PopupWithForm requires `title`, `onClose` and `name` props."),a}return Object(d.a)(r,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"popup popup-editor popup-editor_".concat(this.props.name," ").concat(this.props.isOpen&&"popup_opened"),onClick:function(t){return t.target===t.currentTarget&&e.props.onClose()},children:Object(a.jsx)("div",{className:"popup__editor-container",children:Object(a.jsxs)("form",{className:"editor",name:"editor_".concat(this.props.name),noValidate:!0,children:[Object(a.jsx)("p",{className:"editor__title",children:this.props.title}),this.props.children,Object(a.jsx)("button",{className:"editor__btn-submit hover-breathing hover-breathing_shallow",type:"submit",name:"submit",value:"save-info",children:this.props.buttonTextNormal}),Object(a.jsx)("button",{className:"popup__btn-close editor__btn-close hover-breathing hover-breathing_deep",type:"button",onClick:this.props.onClose})]})})})}}]),r}(i.a.Component),v=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"popup popup-viewer ".concat(this.props.isOpen&&"popup_opened"),onClick:function(t){return t.target===t.currentTarget&&e.props.onClose()},children:Object(a.jsxs)("div",{className:"viewer popup__viewer-container",children:[Object(a.jsx)("button",{className:"popup__btn-close viewer__btn-close hover-breathing hover-breathing_deep",type:"button",onClick:this.props.onClose}),Object(a.jsx)("img",{className:"viewer__image",src:this.props.card&&this.props.card.link,alt:this.props.card&&this.props.card.name}),Object(a.jsx)("p",{className:"viewer__title",children:this.props.card&&this.props.card.name})]})})}}]),r}(i.a.Component);r(17);var x=function(){return Object(a.jsx)("footer",{className:"footer page__margin-wrapper",children:"\xa9 2020 Mesto Russia"})},C=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).handleEditAvatarClick=function(){return a.setState({isEditAvatarPopupOpen:!0})},a.handleEditProfileClick=function(){return a.setState({isEditProfilePopupOpen:!0})},a.handleAddPlaceClick=function(){return a.setState({isAddPlacePopupOpen:!0})},a.handleCardClick=function(e){return a.setState({selectedCard:e})},a.closeAllPopups=function(){a.setState({isAddPlacePopupOpen:!1,isEditProfilePopupOpen:!1,isEditAvatarPopupOpen:!1,selectedCard:void 0})},a.state={isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,selectedCard:void 0},a}return Object(d.a)(r,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"page__wrapper",children:[Object(a.jsx)(p,{}),Object(a.jsx)(O,{onEditAvatar:this.handleEditAvatarClick,onEditProfile:this.handleEditProfileClick,onAddPlace:this.handleAddPlaceClick,onCardClick:this.handleCardClick}),Object(a.jsxs)(f,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonTextNormal:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonTextProgress:"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u044e...",isOpen:this.state.isEditProfilePopupOpen,onClose:this.closeAllPopups,children:[Object(a.jsx)("input",{className:"editor__input editor__input_display-name",type:"text",autoComplete:"name","data-error-element-id":"editor_profile__display-name-error",placeholder:"\u0418\u043c\u044f",name:"display-name",required:!0,maxLength:"40",minLength:"2"}),Object(a.jsx)("span",{className:"editor__error editor__error_hidden",id:"editor_profile__display-name-error",children:" "}),Object(a.jsx)("input",{className:"editor__input editor__input_job",type:"text",name:"job","data-error-element-id":"editor_profile__job-error",placeholder:"\u0420\u043e\u0434 \u0437\u0430\u043d\u044f\u0442\u0438\u0439",required:!0,maxLength:"200",minLength:"2"}),Object(a.jsx)("span",{className:"editor__error editor__error_hidden",id:"editor_profile__job-error",children:" "})]}),Object(a.jsxs)(f,{name:"image-adder",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonTextNormal:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",buttonTextProgress:"\u0421\u043e\u0437\u0434\u0430\u044e...",isOpen:this.state.isAddPlacePopupOpen,onClose:this.closeAllPopups,children:[Object(a.jsx)("input",{className:"editor__input editor__input_display-name",type:"text",name:"display-name","data-error-element-id":"editor_image-adder__display-name-error",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,maxLength:"30",minLength:"1"}),Object(a.jsx)("span",{className:"editor__error editor__error_hidden",id:"editor_image-adder__display-name-error",children:" "}),Object(a.jsx)("input",{className:"editor__input editor__input_url",type:"url",name:"image-url","data-error-element-id":"editor_image-adder__image-url-error",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(a.jsx)("span",{className:"editor__error editor__error_hidden",id:"editor_image-adder__image-url-error",children:" "})]}),Object(a.jsxs)(f,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonTextNormal:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonTextProgress:"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u044e...",isOpen:this.state.isEditAvatarPopupOpen,onClose:this.closeAllPopups,children:[Object(a.jsx)("input",{className:"editor__input editor__input_url",type:"url",name:"image-url","data-error-element-id":"editor_image-adder__image-url-error",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443 \u0430\u0432\u0430\u0442\u0430\u0440\u0430"}),Object(a.jsx)("span",{className:"editor__error editor__error_hidden",id:"editor_image-adder__image-url-error"})]}),Object(a.jsx)(f,{name:"confirmer",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonTextNormal:"\u0414\u0430",buttonTextProgress:"\u0423\u0434\u0430\u043b\u044f\u044e...",isOpen:!1,onClose:this.closeAllPopups}),Object(a.jsx)(v,{isOpen:!!this.state.selectedCard,card:this.state.selectedCard,onClose:this.closeAllPopups}),Object(a.jsx)(x,{})]})}}]),r}(i.a.Component);o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.cd7c4725.chunk.js.map