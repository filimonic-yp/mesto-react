{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","utils/EmptyImageUrl.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/Footer.js","utils/APIExtension.js","utils/API.js","utils/API.config.js","components/App.js","index.js"],"names":["Header","className","defaultUser","name","about","avatar","_id","undefined","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isLikedByMe","card","likes","some","user","isOwnedByMe","owner","likeCount","length","src","link","alt","onClick","type","onCardLike","onCardDelete","Main","updateMe","setState","userName","userDescription","userAvatar","state","this","context","onEditAvatar","onEditProfile","onAddPlace","cards","map","onCardClick","Component","contextType","PopupWithForm","isOpen","e","target","currentTarget","onClose","onSubmit","noValidate","title","children","value","buttonTextNormal","EditProfilePopup","useState","setName","description","setDescription","useEffect","buttonTextProgress","preventDefault","onUpdateUser","onChange","autoComplete","data-error-element-id","placeholder","required","maxLength","minLength","id","EditAvatarPopup","avatarRef","useRef","setAvatar","onUpdateAvatar","current","ref","AddPlacePopup","setLink","ImagePopup","Footer","baseUrl","headers","_baseUrl","_headers","method","urlPart","payload","url","requestOptions","Object","assign","body","JSON","stringify","fetch","then","res","ok","json","Promise","reject","status","catch","err","console","error","_fetch","cardId","avatarUrl","authorization","App","handleEditAvatarClick","isEditAvatarPopupOpen","handleEditProfileClick","isEditProfilePopupOpen","handleAddPlaceClick","isAddPlacePopupOpen","handleCardClick","selectedCard","handleCardLike","likedCard","log","likedUser","api","dislikeCard","likeCard","newCard","updateCards","handleCardDelete","deletedCard","deleteCard","filter","handleUpdateUser","closeAllPopups","newUserData","handleUpdateAvatar","handleAddPlaceSubmit","place","sendCard","all","getMe","data","getInitialCards","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ad69426.chunk.js","sourcesContent":["import './Header.css';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"></div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const defaultUser = {\r\n  name:'',\r\n  about:'',\r\n  avatar:'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==', // Empty gif 1x1\r\n  _id: undefined,\r\n}\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\n\r\nexport default function Card(props)\r\n{\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isLikedByMe = props.card.likes.some( user => user._id === currentUser._id  );\r\n  const isOwnedByMe = props.card.owner._id === currentUser._id;\r\n  //const isOwnedByMe = true;\r\n  const likeCount = props.card.likes.length;\r\n\r\n  return (\r\n    <li className=\"card\">\r\n      <img className=\"card__image\" src={props.card.link} alt={props.card.name} onClick={props.onClick}/>\r\n      <p className=\"card__caption\">{props.card.name}</p>\r\n      <div className=\"card__like-control\">\r\n        <button className={`card__btn-like hover-breathing hover-breathing_deep ${isLikedByMe && 'card__btn-like_liked'}`} type=\"button\" onClick={props.onCardLike}></button>\r\n        <p className=\"card__like-counter\">{likeCount}</p>\r\n      </div>\r\n      <button className={`card__btn-remove hover-breathing hover-breathing_deep ${!isOwnedByMe && 'card__btn-remove_hidden'}`} type=\"button\" onClick={props.onCardDelete}></button>\r\n    </li>\r\n  );\r\n}\r\n","const emptyImage = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\r\nexport default emptyImage;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport EmptyImageUrl from '../utils/EmptyImageUrl';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\n\r\n\r\n\r\nclass Main extends React.Component {\r\n\r\n  static contextType = CurrentUserContext;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      userName: '',\r\n      userDescription: '',\r\n      userAvatar: EmptyImageUrl,\r\n    }\r\n  }\r\n\r\n\r\n  updateMe = ({name, about, avatar}) => {\r\n    this.setState({\r\n      userName: name,\r\n      userDescription: about,\r\n      userAvatar: avatar\r\n    })\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <main className=\"main page__margin-wrapper\">\r\n\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar-box\">\r\n            <img className=\"profile__avatar\" alt={`${this.context.name}, ${this.context.about}`} src={this.context.avatar} />\r\n            <button className=\"profile__btn-set-avatar\" type=\"button\" onClick={this.props.onEditAvatar}></button>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__display-name-wrapper\">\r\n              <h1 className=\"profile__display-name\">{this.context.name}</h1>\r\n              <button className=\"profile__btn-edit hover-breathing hover-breathing_deep\" type=\"button\" onClick={this.props.onEditProfile}></button>\r\n            </div>\r\n            <p className=\"profile__job\">{this.context.about}</p>\r\n          </div>\r\n          <button className=\"profile__btn-add hover-breathing hover-breathing_deep\" type=\"button\" onClick={this.props.onAddPlace}></button>\r\n        </section>\r\n\r\n        <ul className=\"cards\">\r\n          {this.props.cards.map( (card) =>\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onClick={() => this.props.onCardClick(card)}\r\n              onCardLike={() => this.props.onCardLike(card)}\r\n              onCardDelete={() => this.props.onCardDelete(card)}\r\n            />\r\n          )}\r\n        </ul>\r\n\r\n      </main>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nclass PopupWithForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className={`popup popup-editor popup-editor_${this.props.name} ${this.props.isOpen && 'popup_opened'}`} onClick={(e) => e.target === e.currentTarget && this.props.onClose()}>\r\n      <div className=\"popup__editor-container\">\r\n        <form onSubmit={this.props.onSubmit} className=\"editor\" name={`editor_${this.props.name}`} noValidate>\r\n          <p className=\"editor__title\">{this.props.title}</p>\r\n          {this.props.children}\r\n          <button className=\"editor__btn-submit hover-breathing hover-breathing_shallow\" type=\"submit\" name=\"submit\" value=\"save-info\">{this.props.buttonTextNormal}</button>\r\n          <button className=\"popup__btn-close editor__btn-close hover-breathing hover-breathing_deep\" type=\"button\" onClick={this.props.onClose}></button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm'\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\r\n\r\nfunction EditProfilePopup(props)  {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      buttonTextNormal=\"Сохранить\"\r\n      buttonTextProgress=\"Сохраняю...\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      >\r\n\r\n      <input onChange={handleChangeName} value={name} className=\"editor__input editor__input_display-name\" type=\"text\" autoComplete=\"name\" data-error-element-id=\"editor_profile__display-name-error\" placeholder=\"Имя\" name=\"display-name\" required maxLength=\"40\" minLength=\"2\" />\r\n      <span className=\"editor__error editor__error_hidden\" id=\"editor_profile__display-name-error\"> </span>\r\n      <input onChange={handleChangeDescription} value={description} className=\"editor__input editor__input_job\" type=\"text\" name=\"job\" data-error-element-id=\"editor_profile__job-error\" placeholder=\"Род занятий\" required maxLength=\"200\" minLength=\"2\" />\r\n      <span className=\"editor__error editor__error_hidden\" id=\"editor_profile__job-error\"> </span>\r\n    </PopupWithForm>\r\n  )\r\n\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm'\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\r\n\r\nfunction EditAvatarPopup(props)  {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const avatarRef = React.useRef();\r\n  const [avatar, setAvatar] = React.useState(currentUser.avatar);\r\n\r\n  React.useEffect(() => {\r\n    setAvatar(currentUser.avatar);\r\n  }, [currentUser]);\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar(avatarRef.current.value);\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      buttonTextNormal=\"Сохранить\"\r\n      buttonTextProgress=\"Сохраняю...\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      >\r\n\r\n      <input ref={avatarRef} className=\"editor__input editor__input_url\" type=\"url\" name=\"image-url\" data-error-element-id=\"editor_image-adder__image-url-error\" required placeholder=\"Ссылка на картинку аватара\" />\r\n      <span className=\"editor__error editor__error_hidden\" id=\"editor_image-adder__image-url-error\"></span>\r\n  </PopupWithForm>\r\n  )\r\n\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nfunction AddPlacePopup(props)  {\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink(e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function resetForm() {\r\n    setName('');\r\n    setLink('');\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const card = {name, link}\r\n    resetForm();\r\n    props.onAddPlace(card);\r\n\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"image-adder\"\r\n      title=\"Новое место\"\r\n      buttonTextNormal=\"Создать\"\r\n      buttonTextProgress=\"Создаю...\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n\r\n      <input onChange={handleChangeName} value={name} className=\"editor__input editor__input_display-name\" type=\"text\" name=\"display-name\" data-error-element-id=\"editor_image-adder__display-name-error\" placeholder=\"Название\" required maxLength=\"30\" minLength=\"1\" />\r\n      <span className=\"editor__error editor__error_hidden\" id=\"editor_image-adder__display-name-error\"> </span>\r\n      <input onChange={handleChangeLink} value={link} className=\"editor__input editor__input_url\" type=\"url\" name=\"image-url\" data-error-element-id=\"editor_image-adder__image-url-error\" required placeholder=\"Ссылка на картинку\" />\r\n      <span className=\"editor__error editor__error_hidden\" id=\"editor_image-adder__image-url-error\"> </span>\r\n    </PopupWithForm>\r\n  )\r\n\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\n\r\nclass ImagePopup extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={`popup popup-viewer ${this.props.isOpen && 'popup_opened'}`} onClick={(e) => e.target === e.currentTarget && this.props.onClose()}>\r\n      <div className=\"viewer popup__viewer-container\"  >\r\n        <button className=\"popup__btn-close viewer__btn-close hover-breathing hover-breathing_deep\" type=\"button\" onClick={this.props.onClose}></button>\r\n        <img className=\"viewer__image\" src={this.props.card && this.props.card.link} alt={this.props.card && this.props.card.name} />\r\n        <p className=\"viewer__title\">{this.props.card && this.props.card.name}</p>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ImagePopup;\r\n","import './Footer.css';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer page__margin-wrapper\">\r\n      © 2020 Mesto Russia\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;\r\n","import API from './API';\r\nimport APIConfig from './API.config';\r\n/*\r\n  ApiExtension расширяет объекты карточек:\r\n    Добавляет карточкам атрибуты:\r\n      likeCount - количество лайков\r\n      isLikedByMe - отлайкана ли карточка мной\r\n      isOwnedByMe - я ли владелец карточки\r\n\r\n    Также в лучае отсутствия информации, класс запрашивает недостающую информацию из /users/me (например, перед получением карточки) и хранит _id пользователя\r\n*/\r\n\r\n/*\r\nclass APIExtension extends API {\r\n  constructor (options)\r\n  {\r\n    super(options);\r\n  }\r\n\r\n  getMe()\r\n  {\r\n    return super\r\n      .getMe()\r\n      .then((data) => {this._storeMyId(data); return data});\r\n  }\r\n\r\n  getInitialCards()\r\n  {\r\n    return (this._myId ? Promise.resolve() : this.getMe())\r\n    .then(() => super.getInitialCards())\r\n    .then(cards => cards.map(card => this._extendCard(card)));\r\n  }\r\n\r\n  likeCard(cardId)\r\n  {\r\n    return super\r\n      .likeCard(cardId)\r\n      .then((card) => (this._extendCard(card)));\r\n  }\r\n\r\n  dislikeCard(cardId)\r\n  {\r\n    return super\r\n      .dislikeCard(cardId)\r\n      .then((card) => (this._extendCard(card)));\r\n  }\r\n\r\n  sendCard(data)\r\n  {\r\n    return super\r\n      .sendCard(data)\r\n      .then((card) => (this._extendCard(card)));\r\n  }\r\n\r\n  _extendCard(card)\r\n  {\r\n    card['isOwnedByMe'] = this._isMyId(card.owner._id)\r\n    card['likeCount']   = card.likes.length || 0;\r\n    card['isLikedByMe'] = card.likes.some(person => this._isMyId(person._id))\r\n    return card;\r\n  }\r\n\r\n  _isMyId(otherId)\r\n  {\r\n    return this._myId === otherId;\r\n  }\r\n\r\n  _storeMyId(data)\r\n  {\r\n    //console.log(\"My ID saved:\", data._id);\r\n    this._myId = data._id\r\n  }\r\n\r\n}\r\n*/\r\nexport default new API(APIConfig);\r\n","export default class API {\r\n  constructor({baseUrl, headers}) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _fetch({method = 'GET', urlPart, payload }) {\r\n    const url =  this._baseUrl + urlPart;\r\n    const requestOptions = Object.assign({}, {headers: this._headers}, {method}, payload ? {body: JSON.stringify(payload)} : undefined );\r\n    return fetch(url, requestOptions)\r\n      .then((res) => res.ok ? res.json() : Promise.reject(`Server respond with ${res.status}`))\r\n      .catch((err) => {console.error(`Something went wrong`, err); return Promise.reject(err)});\r\n  }\r\n\r\n  getInitialCards() {\r\n    return this._fetch({\r\n      urlPart: '/cards'\r\n    });\r\n  }\r\n\r\n  sendCard({name, link}) {\r\n    return this._fetch({\r\n      method: 'POST',\r\n      urlPart: '/cards',\r\n      payload: {name, link}\r\n    });\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._fetch({\r\n      method: 'DELETE',\r\n      urlPart: `/cards/${cardId}`\r\n    });\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    return this._fetch({\r\n      method: 'PUT',\r\n      urlPart: `/cards/likes/${cardId}`\r\n    });\r\n  }\r\n\r\n  dislikeCard(cardId) {\r\n    return this._fetch({\r\n      method: 'DELETE',\r\n      urlPart: `/cards/likes/${cardId}`\r\n    });\r\n  }\r\n\r\n  getMe() {\r\n    return this._fetch({\r\n      urlPart: `/users/me`\r\n    });\r\n  }\r\n\r\n  updateMe({name, about}) {\r\n    return this._fetch({\r\n      method: 'PATCH',\r\n      urlPart: `/users/me`,\r\n      payload: {name, about}\r\n    });\r\n  }\r\n\r\n  setAvatar(avatarUrl) {\r\n    return this._fetch({\r\n      method: 'PATCH',\r\n      urlPart: `/users/me/avatar`,\r\n      payload: {avatar: avatarUrl}\r\n    });\r\n  }\r\n}\r\n","const apiConfig = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    authorization: '21fa6b5f-35b5-4dfd-b2f6-88404e0e94c4'\r\n  }\r\n};\r\n\r\nexport default apiConfig;\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport Footer from './Footer';\r\nimport api from '../utils/APIExtension';\r\nimport {CurrentUserContext, defaultUser} from '../contexts/CurrentUserContext';\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEditProfilePopupOpen: false,\r\n      isAddPlacePopupOpen: false,\r\n      isEditAvatarPopupOpen: false,\r\n      selectedCard: undefined,\r\n      currentUser: defaultUser,\r\n      cards: [],\r\n    }\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    Promise.all([\r\n      api\r\n        .getMe()\r\n        .then(data => this.setState({currentUser: data })),\r\n      api\r\n        .getInitialCards()\r\n        .then((data) => this.updateCards(data))\r\n      ])\r\n      .catch(e => console.error('Error', e));\r\n  }\r\n\r\n  handleEditAvatarClick = () => this.setState({isEditAvatarPopupOpen: true});\r\n\r\n  handleEditProfileClick = () => this.setState({isEditProfilePopupOpen: true});\r\n\r\n  handleAddPlaceClick = () => this.setState({isAddPlacePopupOpen: true});\r\n\r\n  handleCardClick = (card) => this.setState({selectedCard: card});\r\n\r\n  handleCardLike = (likedCard) => {\r\n    console.log('hcl', likedCard)\r\n    const isLiked = likedCard.likes.some(likedUser => likedUser._id === this.state.currentUser._id);\r\n    (isLiked\r\n      ? api.dislikeCard(likedCard._id)\r\n      : api.likeCard(likedCard._id))\r\n      .then(newCard => this.updateCards(this.state.cards.map( card => card._id === newCard._id ? newCard : card )))\r\n      .catch(e => console.error('Unable to process like', e));\r\n  }\r\n\r\n  handleCardDelete = (deletedCard) => {\r\n    api\r\n      .deleteCard(deletedCard._id)\r\n      .then(this.setState({cards: this.state.cards.filter(card => deletedCard._id !== card._id)}))\r\n      .catch(e => console.error('Unable to delete card', e));\r\n  }\r\n\r\n  updateCards = (cards) => {\r\n    this.setState({\r\n      cards:cards,\r\n    })\r\n  }\r\n\r\n\r\n\r\n  handleUpdateUser = (user) => {\r\n    this.closeAllPopups();\r\n    api\r\n      .updateMe(user)\r\n      .then(newUserData => this.setState({currentUser: newUserData}))\r\n      .catch(e => console.error('Error updating user', e));\r\n  }\r\n\r\n  handleUpdateAvatar = (avatar) => {\r\n    this.closeAllPopups();\r\n    api\r\n      .setAvatar(avatar)\r\n      .then(newUserData => this.setState({currentUser: newUserData}))\r\n      .catch(e => console.error('Error updating user avatar', e));\r\n  }\r\n\r\n  handleAddPlaceSubmit = (place) => {\r\n    this.closeAllPopups();\r\n    api\r\n      .sendCard(place)\r\n      .then(newCard => this.setState({cards: [newCard, ...this.state.cards]}))\r\n      .catch(e => console.error('Error adding card', e));\r\n  }\r\n\r\n  closeAllPopups = () => {\r\n    this.setState({\r\n      isAddPlacePopupOpen: false,\r\n      isEditProfilePopupOpen: false,\r\n      isEditAvatarPopupOpen: false,\r\n      selectedCard: undefined\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page__wrapper\">\r\n\r\n      <Header />\r\n      <CurrentUserContext.Provider value={this.state.currentUser}>\r\n        <Main\r\n          onEditAvatar = {this.handleEditAvatarClick}\r\n          onEditProfile = {this.handleEditProfileClick}\r\n          onAddPlace = {this.handleAddPlaceClick}\r\n          onCardClick = {this.handleCardClick}\r\n          onCardLike = {this.handleCardLike}\r\n          onCardDelete = {this.handleCardDelete}\r\n          cards = {this.state.cards}\r\n        />\r\n      </CurrentUserContext.Provider>\r\n\r\n      <CurrentUserContext.Provider value={this.state.currentUser}>\r\n        <EditProfilePopup\r\n          isOpen={this.state.isEditProfilePopupOpen}\r\n          onClose={this.closeAllPopups}\r\n          onUpdateUser={this.handleUpdateUser}\r\n        />\r\n      </CurrentUserContext.Provider>\r\n\r\n      <CurrentUserContext.Provider value={this.state.currentUser}>\r\n        <EditAvatarPopup\r\n          isOpen={this.state.isEditAvatarPopupOpen}\r\n          onClose={this.closeAllPopups}\r\n          onUpdateAvatar={this.handleUpdateAvatar}\r\n          />\r\n      </CurrentUserContext.Provider>\r\n\r\n      <AddPlacePopup\r\n          isOpen={this.state.isAddPlacePopupOpen}\r\n          onClose={this.closeAllPopups}\r\n          onAddPlace={this.handleAddPlaceSubmit}\r\n      />\r\n\r\n      <ImagePopup isOpen={!!this.state.selectedCard} card={this.state.selectedCard} onClose={this.closeAllPopups}/>\r\n\r\n      <PopupWithForm\r\n        name=\"confirmer\"\r\n        title=\"Вы уверены?\"\r\n        buttonTextNormal=\"Да\"\r\n        buttonTextProgress=\"Удаляю...\"\r\n        isOpen={false}\r\n        onClose={this.closeAllPopups}>\r\n      </PopupWithForm>\r\n\r\n      <Footer />\r\n\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}